import tkinter as tk
from PIL import Image, ImageTk
import tkinter as tk
from tkinter import messagebox
from tkinter import PhotoImage
import itertools
from nltk import word_tokenize, pos_tag
import pygame
from gtts import gTTS
import tempfile
import os
from pygame import mixer
mixer.init()

import sys
def resource_path(relative_path):
    """ Get absolute path to resource, works for dev and PyInstaller """
    try:
        base_path = sys._MEIPASS
    except Exception:
        base_path = os.path.abspath(".")

    return os.path.join(base_path, relative_path)


def play_mp3(filepath):
    stop_audio()
    try:
        mixer.music.load(filepath)
        mixer.music.play()
    except Exception as e:
        print("Error playing MP3:", e)

def stop_audio():
    mixer.music.stop()




def play_text_audio(text):
    try:
        # Stop any currently playing audio
        stop_audio()

        # Generate temporary MP3 file
        tts = gTTS(text)
        with tempfile.NamedTemporaryFile(delete=False, suffix=".mp3") as fp:
            temp_path = fp.name
            tts.save(temp_path)

        pygame.mixer.music.load(temp_path)
        pygame.mixer.music.play()

        # Optional: Delete the temp file after playing finishes
        def remove_temp():
            while pygame.mixer.music.get_busy():
                pygame.time.wait(100)
            os.remove(temp_path)

        # Start cleanup in the background
        import threading
        threading.Thread(target=remove_temp, daemon=True).start()

    except Exception as e:
        messagebox.showerror("Audio Error", f"Could not play audio: {e}")





# Helper function to create colored buttons with hover effect
def create_colored_button(parent, text, command=None, width=200, height=50, radius=20,
                          bg="#546E7A", fg="white", hover_bg="#455A64", padx=10, pady=5,
                          font=("Segoe UI", 18, "bold")):
    class RoundedButton(tk.Canvas):
        def __init__(self):
            super().__init__(parent, width=width, height=height, highlightthickness=0, bg=parent['bg'])
            self.radius = radius
            self.command = command
            self.bg = bg
            self.fg = fg
            self.hover_bg = hover_bg
            self.text = text

            self.shadow = self.create_rounded_rect(4, 4, width, height, radius, fill="#999999")
            self.button = self.create_rounded_rect(0, 0, width-4, height-4, radius, fill=bg)
            self.label = self.create_text(width//2 - 2, height//2 - 2, text=text, fill=fg, font=font)

            # Bind only to the whole canvas, not to individual items
            self.bind("<Button-1>", self._on_click)

            # Hover bindings can stay on items if needed
            self.bind("<Enter>", self._on_enter)
            self.bind("<Leave>", self._on_leave)
            self.tag_bind(self.button, "<Enter>", self._on_enter)
            self.tag_bind(self.label, "<Enter>", self._on_enter)
            self.tag_bind(self.button, "<Leave>", self._on_leave)
            self.tag_bind(self.label, "<Leave>", self._on_leave)

            self.pack(padx=padx, pady=pady)


        def create_rounded_rect(self, x1, y1, x2, y2, r, **kwargs):
            points = [
                x1+r, y1,
                x2-r, y1,
                x2, y1,
                x2, y1+r,
                x2, y2-r,
                x2, y2,
                x2-r, y2,
                x1+r, y2,
                x1, y2,
                x1, y2-r,
                x1, y1+r,
                x1, y1,
            ]
            return self.create_polygon(points, smooth=True, **kwargs)

        def _on_click(self, event):
            if self.command:
                self.command()

        def _on_enter(self, event):
            self.itemconfig(self.button, fill=self.hover_bg)

        def _on_leave(self, event):
            self.itemconfig(self.button, fill=self.bg)

    return RoundedButton()

translations = {
    'en': {"prev": "<< Previous", "next": "Next >>", "back": "тмЕ Back", "speak": "ЁЯФК Speak"},
    'ml': {"prev": "<< р┤ор╡Бр┤ор╡Нр┤кр╡Зр┤др╡Н", "next": "р┤Ер┤Яр╡Бр┤др╡Нр┤др┤др╡Н >>", "back": "тмЕ р┤кр┤┐р┤ир╡Нр┤ир╡Зр┤пр╡Нр┤Хр╡Нр┤Хр╡Н", "speak": "ЁЯФК р┤Хр╡Зр╡╛р┤Хр╡Нр┤Хр╡В"},
    'hi': {"prev": "<< рдкрд┐рдЫрд▓рд╛", "next": "рдЕрдЧрд▓рд╛ >>", "back": "тмЕ рд╡рд╛рдкрд┐рд╕", "speak": "ЁЯФК рд╕реБрдиреЛ"},
    'ta': {"prev": "<< роорпБроирпНродрпИропродрпБ", "next": "роЕроЯрпБродрпНродродрпБ >>", "back": "тмЕ рокро┐ройрпН", "speak": "ЁЯФК роХрпЗро│рпН"},
    'te': {"prev": "<< р░ор▒Бр░ир▒Бр░кр░Яр░┐", "next": "р░др░░р▒Нр░╡р░╛р░д >>", "back": "тмЕ р░╡р▒Жр░ир░Хр▒Нр░Хр░┐", "speak": "ЁЯФК р░╡р░┐р░ир░┐"},
    'kn': {"prev": "<< р▓╣р▓┐р▓Вр▓жр▓┐р▓ир▓жр│Б", "next": "р▓ор│Бр▓Вр▓жр▓┐р▓ир▓жр│Б >>", "back": "тмЕ р▓╣р▓┐р▓Вр▓жр│Бр▓ор│Бр▓Вр▓жр▓╛р▓Чр▓┐", "speak": "ЁЯФК р▓Хр│Зр▓│р▓┐"},
}

translations1 = {
    'en': {
        "prev": "<< Previous", "next": "Next >>", "back": "тмЕ Back",
        "listen": "ЁЯФК Listen",
        "basic_grammar": "ЁЯУЪ Basic Grammar Study",
        "grammar_analyzer": "ЁЯУЭ Grammar Analyzer",
        "analyze": "тЬФ Analyze",
        "grammar_options": "Grammar Options",
        "enter_sentence": "Type a sentence to analyze parts of speech:",
        "warning_empty": "Please enter a sentence.",
    },
    'ml': {
        "prev": "<< р┤ор╡Бр┤ор╡Нр┤кр╡Зр┤др╡Н", "next": "р┤Ер┤Яр╡Бр┤др╡Нр┤др┤др╡Н >>", "back": "тмЕ р┤кр┤┐р┤ир╡Нр┤ир╡Зр┤пр╡Нр┤Хр╡Нр┤Хр╡Н",
        "listen": "ЁЯФК р┤Хр╡Зр╡╛р┤Хр╡Нр┤Хр╡В",
        "basic_grammar": "ЁЯУЪ р┤Ер┤Яр┤┐р┤╕р╡Нр┤ер┤╛р┤и р┤╡р╡Нр┤пр┤╛р┤Хр┤░р┤гр┤В р┤кр┤ар┤ир┤В",
        "grammar_analyzer": "ЁЯУЭ р┤╡р╡Нр┤пр┤╛р┤Хр┤░р┤г р┤╡р┤┐р┤╢р┤Хр┤▓р┤ир┤В",
        "analyze": "тЬФ р┤╡р┤┐р┤╢р┤Хр┤▓р┤ир┤В р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤Х",
        "grammar_options": "р┤╡р╡Нр┤пр┤╛р┤Хр┤░р┤г р┤Ур┤кр╡Нр┤╖р┤ир╡Бр┤Хр╡╛",
        "enter_sentence": "р┤╡р┤╛р┤Хр╡Нр┤пр┤В р┤Яр╡Ир┤кр╡Нр┤кр╡Бр┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤Х:",
        "warning_empty": "р┤жр┤пр┤╡р┤╛р┤пр┤┐ р┤Тр┤░р╡Б р┤╡р┤╛р┤Хр╡Нр┤пр┤В р┤ир╡╜р┤Хр╡Бр┤Х.",
    },
    'hi': {
        "prev": "<< рдкрд┐рдЫрд▓рд╛", "next": "рдЕрдЧрд▓рд╛ >>", "back": "тмЕ рд╡рд╛рдкрд╕",
        "listen": "ЁЯФК рд╕реБрдиреЛ",
        "basic_grammar": "ЁЯУЪ рдореВрд▓ рд╡реНрдпрд╛рдХрд░рдг рдЕрдзреНрдпрдпрди",
        "grammar_analyzer": "ЁЯУЭ рд╡реНрдпрд╛рдХрд░рдг рд╡рд┐рд╢реНрд▓реЗрд╖рдХ",
        "analyze": "тЬФ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ",
        "grammar_options": "рд╡реНрдпрд╛рдХрд░рдг рд╡рд┐рдХрд▓реНрдк",
        "enter_sentence": "рднрд╛рдЧреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд╛рдХреНрдп рд▓рд┐рдЦреЗрдВ:",
        "warning_empty": "рдХреГрдкрдпрд╛ рдПрдХ рд╡рд╛рдХреНрдп рджрд░реНрдЬ рдХрд░реЗрдВред",
    },
    'ta': {
        "prev": "<< роорпБроирпНродрпИропродрпБ", "next": "роЕроЯрпБродрпНродродрпБ >>", "back": "тмЕ рокро┐ройрпН роЪрпЖро▓рпНро▓",
        "listen": "ЁЯФК роХрпЗро│рпН",
        "basic_grammar": "ЁЯУЪ роЕроЯро┐рокрпНрокроЯрпИ роЗро▓роХрпНроХрогроорпН рокропро┐ро▒рпНроЪро┐",
        "grammar_analyzer": "ЁЯУЭ роЗро▓роХрпНроХрогроорпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ",
        "analyze": "тЬФ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпН",
        "grammar_options": "роЗро▓роХрпНроХрогроорпН ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН",
        "enter_sentence": "рокроХрпБрокрпНрокро╛ропрпНро╡ро┐ро▒рпНроХро╛роХ роТро░рпБ ро╡ро╛роХрпНроХро┐ропроорпН родроЯрпНроЯроЪрпНроЪрпБ роЪрпЖропрпНроХ:",
        "warning_empty": "родропро╡рпБ роЪрпЖропрпНродрпБ роТро░рпБ ро╡ро╛роХрпНроХро┐ропроорпН роЙро│рпНро│ро┐роЯро╡рпБроорпН.",
    },
    'te': {
        "prev": "<< р░ор▒Бр░ир▒Бр░кр░Яр░┐", "next": "р░др░░р▒Бр░╡р░╛р░д >>", "back": "тмЕ р░╡р▒Жр░ир░Хр▒Нр░Хр░┐",
        "listen": "ЁЯФК р░╡р░┐р░ир░Вр░бр░┐",
        "basic_grammar": "ЁЯУЪ р░кр▒Нр░░р░╛р░ер░ор░┐р░Х р░╡р▒Нр░пр░╛р░Хр░░р░г р░Ер░зр▒Нр░пр░пр░ир░В",
        "grammar_analyzer": "ЁЯУЭ р░╡р▒Нр░пр░╛р░Хр░░р░г р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г",
        "analyze": "тЬФ р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░┐р░Вр░Ър▒Б",
        "grammar_options": "р░╡р▒Нр░пр░╛р░Хр░░р░г р░Ор░Вр░кр░┐р░Хр░▓р▒Б",
        "enter_sentence": "р░нр░╛р░Чр░╛р░▓р░ир▒Б р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░┐р░Вр░Ър░бр░╛р░ир░┐р░Хр░┐ р░╡р░╛р░Хр▒Нр░пр░В р░Яр▒Ир░кр▒Н р░Ър▒Зр░пр░Вр░бр░┐:",
        "warning_empty": "р░жр░пр░Ър▒Зр░╕р░┐ р░Тр░Х р░╡р░╛р░Хр▒Нр░пр░В р░ир░ор▒Лр░жр▒Б р░Ър▒Зр░пр░Вр░бр░┐.",
    },
    'kn': {
        "prev": "<< р▓╣р▓┐р▓Вр▓жр▓┐р▓ир▓жр│Б", "next": "р▓ор│Бр▓Вр▓жр▓┐р▓ир▓жр│Б >>", "back": "тмЕ р▓╣р▓┐р▓Вр▓жр▓Хр│Нр▓Хр│Ж",
        "listen": "ЁЯФК р▓Хр│Зр▓│р▓┐",
        "basic_grammar": "ЁЯУЪ р▓ор│Вр▓▓ р▓╡р│Нр▓пр▓╛р▓Хр▓░р▓г р▓Ер▓зр│Нр▓пр▓пр▓и",
        "grammar_analyzer": "ЁЯУЭ р▓╡р│Нр▓пр▓╛р▓Хр▓░р▓г р▓╡р▓┐р▓╢р│Нр▓▓р│Зр▓╖р▓гр│Ж",
        "analyze": "тЬФ р▓╡р▓┐р▓╢р│Нр▓▓р│Зр▓╖р▓┐р▓╕р▓┐",
        "grammar_options": "р▓╡р│Нр▓пр▓╛р▓Хр▓░р▓г р▓Жр▓пр│Нр▓Хр│Жр▓Чр▓│р│Б",
        "enter_sentence": "р▓╡р▓╛р▓Хр│Нр▓пр▓╡р▓ир│Нр▓ир│Б р▓Яр│Ир▓кр│Н р▓ор▓╛р▓бр▓┐ р▓нр▓╛р▓Чр▓Чр▓│р▓ир│Нр▓ир│Б р▓╡р▓┐р▓╢р│Нр▓▓р│Зр▓╖р▓┐р▓╕р▓┐:",
        "warning_empty": "р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓Тр▓Вр▓жр│Б р▓╡р▓╛р▓Хр│Нр▓пр▓╡р▓ир│Нр▓ир│Б р▓ир▓ор│Вр▓жр▓┐р▓╕р▓┐.",
    }
}

translation2 = {
    "en": {
        "title": "ЁЯУЦ Select a Story",
        "open_story": "ЁЯУЦ Open Story",
        "back": "тмЕ Back",
        "listen": "ЁЯФК Listen",
        "warning": "Please select a story.",
    },
    "ml": {
        "title": "ЁЯУЦ р┤Тр┤░р╡Б р┤Хр┤е р┤др┤┐р┤░р┤Юр╡Нр┤Юр╡Жр┤Яр╡Бр┤Хр╡Нр┤Хр╡Бр┤Х",
        "open_story": "ЁЯУЦ р┤Хр┤е р┤др╡Бр┤▒р┤Хр╡Нр┤Хр╡Бр┤Х",
        "back": "тмЕ р┤кр┤┐р╡╗р┤╡р┤▓р┤┐р┤Хр╡Нр┤Хр╡Бр┤Х",
        "listen": "ЁЯФК р┤Хр╡Зр╡╛р┤Хр╡Нр┤Хр╡Бр┤Х",
        "warning": "р┤жр┤пр┤╡р┤╛р┤пр┤┐ р┤Тр┤░р╡Б р┤Хр┤е р┤др┤┐р┤░р┤Юр╡Нр┤Юр╡Жр┤Яр╡Бр┤Хр╡Нр┤Хр╡Бр┤Х.",
    },
    "hi": {
        "title": "ЁЯУЦ рдПрдХ рдХрд╣рд╛рдиреА рдЪреБрдиреЗрдВ",
        "open_story": "ЁЯУЦ рдХрд╣рд╛рдиреА рдЦреЛрд▓реЗрдВ",
        "back": "тмЕ рд╡рд╛рдкрд╕",
        "listen": "ЁЯФК рд╕реБрдиреЗрдВ",
        "warning": "рдХреГрдкрдпрд╛ рдПрдХ рдХрд╣рд╛рдиреА рдЪреБрдиреЗрдВред",
    },
    "ta": {
        "title": "ЁЯУЦ роТро░рпБ роХродрпИ родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН",
        "open_story": "ЁЯУЦ роХродрпИропрпИ родро┐ро▒роХрпНроХро╡рпБроорпН",
        "back": "тмЕ родро┐ро░рпБроорпНрокро┐роЪрпН роЪрпЖро▓рпН",
        "listen": "ЁЯФК роХрпЗро│рпБроЩрпНроХро│рпН",
        "warning": "родропро╡рпБроЪрпЖропрпНродрпБ роТро░рпБ роХродрпИропрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН.",
    },
    "te": {
        "title": "ЁЯУЦ р░Хр░ер░ир▒Б р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐",
        "open_story": "ЁЯУЦ р░Хр░е р░др▒Жр░░р░╡р░Вр░бр░┐",
        "back": "тмЕ р░╡р▒Жр░ир░Хр▒Нр░Хр░┐",
        "listen": "ЁЯФК р░╡р░┐р░ир░Вр░бр░┐",
        "warning": "р░жр░пр░Ър▒Зр░╕р░┐ р░Тр░Х р░Хр░ер░ир▒Б р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐.",
    },
    "kn": {
        "title": "ЁЯУЦ р▓Хр▓ер│Ж р▓Жр▓пр│Нр▓Хр│Жр▓ор▓╛р▓бр▓┐",
        "open_story": "ЁЯУЦ р▓Хр▓ер│Ж р▓др│Жр▓░р│Жр▓жр│Бр▓Хр│Кр▓│р│Нр▓│р▓┐",
        "back": "тмЕ р▓╣р▓┐р▓Вр▓жр▓Хр│Нр▓Хр│Ж",
        "listen": "ЁЯФК р▓Хр│Зр▓│р▓┐",
        "warning": "р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓Тр▓Вр▓жр│Б р▓Хр▓ер│Ж р▓Жр▓пр│Нр▓Хр│Жр▓ор▓╛р▓бр▓┐.",
    }
}

translation3 = {
    "en": {
        "title": "Select a Rhyme",
        "play": "тЦ╢ Play Rhyme",
        "stop": "тП╣ Stop",
        "back": "тмЕ Back",
        "warning": "Warning",
        "select_warning": "Please select a rhyme."
    },
    "ml": {
        "title": "р┤Тр┤░р╡Б р┤мр┤╛р┤▓р┤Чр┤╛р┤ир┤В р┤др┤┐р┤░р┤Юр╡Нр┤Юр╡Жр┤Яр╡Бр┤Хр╡Нр┤Хр╡В",
        "play": "тЦ╢ р┤Чр┤╛р┤ир┤В р┤Жр┤бр╡Н р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤Х",
        "stop": "тП╣ р┤ир┤┐р╡╝р┤др╡Нр┤др╡Бр┤Х",
        "back": "тмЕ р┤ор┤Яр┤Щр╡Нр┤Щр╡Бр┤Х",
        "warning": "р┤ор╡Бр┤ир╡Нр┤ир┤▒р┤┐р┤пр┤┐р┤кр╡Нр┤кр╡Н",
        "select_warning": "р┤жр┤пр┤╡р┤╛р┤пр┤┐ р┤Тр┤░р╡Б р┤мр┤╛р┤▓р┤Чр┤╛р┤ир┤В р┤др┤┐р┤░р┤Юр╡Нр┤Юр╡Жр┤Яр╡Бр┤Хр╡Нр┤Хр╡Бр┤Х."
    },
    "hi": {
        "title": "рдПрдХ рдХрд╡рд┐рддрд╛ рдЪреБрдиреЗрдВ",
        "play": "тЦ╢ рдХрд╡рд┐рддрд╛ рдЪрд▓рд╛рдПрдВ",
        "stop": "тП╣ рдмрдВрдж рдХрд░реЗрдВ",
        "back": "тмЕ рд╡рд╛рдкрд╕",
        "warning": "рдЪреЗрддрд╛рд╡рдиреА",
        "select_warning": "рдХреГрдкрдпрд╛ рдПрдХ рдХрд╡рд┐рддрд╛ рдЪреБрдиреЗрдВред"
    },
    "ta": {
        "title": "роТро░рпБ рокро╛роЯро▓рпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН",
        "play": "тЦ╢ рокро╛роЯро▓рпИ роЗропроХрпНроХро╡рпБроорпН",
        "stop": "тП╣ роиро┐ро▒рпБродрпНродро╡рпБроорпН",
        "back": "тмЕ родро┐ро░рпБроорпНрокро╡рпБроорпН",
        "warning": "роОроЪрпНроЪро░ро┐роХрпНроХрпИ",
        "select_warning": "родропро╡рпБроЪрпЖропрпНродрпБ роТро░рпБ рокро╛роЯро▓рпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН."
    },
    "te": {
        "title": "р░Тр░Х р░кр░жр▒Нр░пр░В р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐",
        "play": "тЦ╢ р░кр░жр▒Нр░пр░В р░Жр░бр░┐р░Вр░Ър░Вр░бр░┐",
        "stop": "тП╣ р░Жр░кр▒Б",
        "back": "тмЕ р░╡р▒Жр░ир░Хр▒Нр░Хр░┐",
        "warning": "р░╣р▒Жр░Ър▒Нр░Ър░░р░┐р░Х",
        "select_warning": "р░жр░пр░Ър▒Зр░╕р░┐ р░Тр░Х р░кр░жр▒Нр░пр░В р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐."
    },
    "kn": {
        "title": "р▓Тр▓Вр▓жр│Б р▓Хр▓ер│Жр▓пр▓ир│Нр▓ир│Б р▓Жр▓пр│Нр▓Хр│Жр▓ор▓╛р▓бр▓┐",
        "play": "тЦ╢ р▓кр▓жр│Нр▓пр▓╡р▓ир│Нр▓ир│Б р▓Жр▓бр▓┐р▓╕р▓┐",
        "stop": "тП╣ р▓ир▓┐р▓▓р│Нр▓▓р▓┐р▓╕р▓┐",
        "back": "тмЕ р▓╣р▓┐р▓Вр▓жр▓Хр│Нр▓Хр│Ж",
        "warning": "р▓Ор▓Ър│Нр▓Ър▓░р▓┐р▓Хр│Ж",
        "select_warning": "р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓Тр▓Вр▓жр│Б р▓кр▓жр│Нр▓пр▓╡р▓ир│Нр▓ир│Б р▓Жр▓пр│Нр▓Хр│Жр▓ор▓╛р▓бр▓┐."
    }
}




def set_language_and_open(lang_code, root):
    global selected_lang_code
    selected_lang_code = lang_code
    open_category_window(root, root)

def show_intro_window():
    intro = tk.Tk()
    intro.title("Welcome to Little Learn App")
    intro.attributes('-fullscreen', True)
    intro.configure(bg="gray")

    # Load and set background image
    try:
        pil_image = Image.open(resource_path("Images/intro.jpg"))
        bg_image = ImageTk.PhotoImage(pil_image)
    except Exception as e:
        print("Failed to load image:", e)
        bg_image = None

    if bg_image:
        bg_label = tk.Label(intro, image=bg_image)
        bg_label.image = bg_image
        bg_label.place(x=0, y=0, relwidth=1, relheight=1)

    # --- Custom Rounded Button Class with Shadow and Animation ---
    class AnimatedRoundedButton(tk.Canvas):
        def __init__(self, parent, text, command=None, width=200, height=50, radius=20,
                     bg="#546E7A", fg="white", hover_bg="#455A64", padx=10, pady=5,
                     font_family="Segoe UI", font_size=18, font_weight="normal"):

            self.bg = bg          # save bg before super
            self.fg = fg
            self.hover_bg = hover_bg
            self.command = command
            self.text = text
            self.radius = radius
            self.width = width
            self.height = height
            self.padx = padx
            self.pady = pady
            self.font_family = font_family
            self.font_weight = font_weight
            self.font_size = font_size

            # Use parent's bg color for canvas bg to avoid black edges
            # When calling super().__init__ inside your AnimatedRoundedButton:

            parent_bg = parent['bg'] if 'bg' in parent.keys() else None
            super().__init__(parent, width=width, height=height, highlightthickness=0, bg="#5EC2B7")
    

            # Draw main button
            self.button = self.create_rounded_rect(0, 0, width-4, height-4, radius, fill="", outline="white", width=2)

            # Draw text label
            self.label = self.create_text(width // 2 - 2, height // 2 - 2,
                                          text=text, fill=fg,
                                          font=(font_family, font_size, font_weight))

            # Bindings
            self.bind("<Button-1>", self._on_click)
            self.bind("<Enter>", self._on_enter)
            self.bind("<Leave>", self._on_leave)
            self.tag_bind(self.button, "<Button-1>", self._on_click)
            self.tag_bind(self.label, "<Button-1>", self._on_click)
            self.tag_bind(self.button, "<Enter>", self._on_enter)
            self.tag_bind(self.label, "<Enter>", self._on_enter)
            self.tag_bind(self.button, "<Leave>", self._on_leave)
            self.tag_bind(self.label, "<Leave>", self._on_leave)

            # Place the canvas padding inside the parent
            self.pack(padx=self.padx, pady=self.pady)

            # Animation cycles
            self.color_cycle = itertools.cycle([bg, hover_bg, "#C08081", "#D36C6C", hover_bg])
            self.size_cycle = itertools.cycle([font_size, font_size + 1, font_size + 2, font_size + 1])

            # Start animations
            self.animate_color()
            self.animate_size()
        def create_tilted_rounded_rect(self, x1, y1, x2, y2, r, tilt_x=10, tilt_y=5, **kwargs):
            points = [
                x1 + r + tilt_x, y1,
                x2 - r + tilt_x, y1,
                x2 + tilt_x + tilt_y, y1 + r,
                x2 + tilt_x + tilt_y, y2 - r,
                x2 - r, y2,
                x1 + r, y2,
                x1, y2 - r,
                x1, y1 + r,
            ]
            return self.create_polygon(points, smooth=True, **kwargs)
        def create_rounded_rect(self, x1, y1, x2, y2, r, **kwargs):
            points = [
                x1 + r, y1,
                x2 - r, y1,
                x2, y1,
                x2, y1 + r,
                x2, y2 - r,
                x2, y2,
                x2 - r, y2,
                x1 + r, y2,
                x1, y2,
                x1, y2 - r,
                x1, y1 + r,
                x1, y1,
            ]
            return self.create_polygon(points, smooth=True, **kwargs)

        def _on_click(self, event):
            if self.command:
                self.command()

        def _on_enter(self, event):
            self.itemconfig(self.button, fill=self.hover_bg)

        def _on_leave(self, event):
            self.itemconfig(self.button, fill=self.bg)

        def animate_color(self):
            new_color = next(self.color_cycle)
            self.itemconfig(self.button, fill=new_color)
            self.after(700, self.animate_color)

        def animate_size(self):
            new_size = next(self.size_cycle)
            self.itemconfig(self.label, font=(self.font_family, new_size, self.font_weight))
            self.after(150, self.animate_size)

    # Add control frame with buttons (assuming create_colored_button is defined elsewhere)
    control_frame = tk.Frame(intro, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')
    create_colored_button(control_frame, "тЬЦ", command=intro.destroy, width=40, height=30,
                          radius=16, bg="#B71C1C", hover_bg="#D32F2F", fg="white").pack(side="right", padx=5, pady=5)
    create_colored_button(control_frame, "тАФ", command=intro.iconify, width=40, height=30,
                          radius=16, bg="#1565C0", hover_bg="#1976D2", fg="white").pack(side="right", padx=5, pady=5)

    # Instantiate your animated curved button
    start_button = AnimatedRoundedButton(
        intro,
        text="Start Learning",
        command=lambda: open_language_window(intro, intro),
        width=350,
        height=80,
        radius=70,
        bg="#DA70D6",        # metallic pink or your choice
        hover_bg="#FF69B4",  # lighter pink on hover
        fg="white",
        font_family="Arial",
        font_size=24,
        font_weight="bold"
    )
    # Updated code (button placed near bottom center)
    start_button.place(relx=0.5, rely=0.95, anchor="s")


    intro.mainloop()


# --------- Window 1: Language Selection ---------
def open_language_window(int,root):
    int.withdraw()
    roo = tk.Toplevel()
    roo.title("Language Selection")
    roo.attributes('-fullscreen', True)
    roo.configure(bg="#FFFACD")

    control_frame = tk.Frame(roo, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    # Close and minimize buttons
    create_colored_button(control_frame, "тЬЦ", command=root.destroy, width=60, height=40,
                          radius=12, bg="#B71C1C", hover_bg="#D32F2F", fg="white").pack(side="right", padx=5, pady=5)
    create_colored_button(control_frame, "тАФ", command=roo.iconify, width=60, height=40,
                          radius=12, bg="#1565C0", hover_bg="#1976D2", fg="white").pack(side="right", padx=5, pady=5)

    tk.Label(roo, text="Select Language", font=("Segoe UI", 28, "bold"), bg="#FFFACD", fg="#263238").pack(pady=60)

    # Language buttons
    create_colored_button(roo, "English", command=lambda: open_category_window(roo, root),
                          width=350, height=60, radius=30, bg="#546E7A", hover_bg="#455A64", fg="white").pack(pady=20)

    create_colored_button(roo, "Malayalam", command=lambda: open_category_window_malayalam(roo, root),
                          width=350, height=60, radius=30, bg="#2E7D32", hover_bg="#1B5E20", fg="white").pack(pady=20)

    create_colored_button(roo, "Hindi", command=lambda: open_category_window_hindi(roo, root),
                          width=350, height=60, radius=30, bg="#FF5722", hover_bg="#E64A19", fg="white").pack(pady=20)

    create_colored_button(root, "Tamil", command=lambda: open_category_window_tamil(roo, root),
                          width=350, height=60, radius=30, bg="#6A1B9A", hover_bg="#4A148C", fg="white").pack(pady=20)

    create_colored_button(roo, "Telugu", command=lambda: open_category_window_telugu(roo, root),
                          width=350, height=60, radius=30, bg="#00897B", hover_bg="#00695C", fg="white").pack(pady=20)

    create_colored_button(roo, "Kannada", command=lambda: open_category_window_kannada(roo, root),
                          width=350, height=60, radius=30, bg="#FF8F00", hover_bg="#EF6C00", fg="white").pack(pady=20)




# --------- Window 2: Study Category ---------
def open_category_window(prev_win, root):
    prev_win.withdraw()  # Hide language window

    win = tk.Toplevel()
    win.title("Study Menu")
    win.attributes('-fullscreen', True)
    win.configure(bg="#FFFACD")

    control_frame = tk.Frame(win, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    # X button closes entire app
    create_colored_button(control_frame, "тЬЦ", command=root.destroy,
                          width=60, height=40, radius=12,
                          bg="#B71C1C", hover_bg="#D32F2F", fg="white").pack(side="right", padx=5, pady=5)

    # Minimize button
    create_colored_button(control_frame, "тАФ", command=win.iconify,
                          width=60, height=40, radius=12,
                          bg="#1565C0", hover_bg="#1976D2", fg="white").pack(side="right", padx=5, pady=5)

    tk.Label(win, text="What do you want to study?", font=("Segoe UI", 28, "bold"),
             bg="#FFFACD", fg="#263238").pack(pady=60)

    create_colored_button(win, "Letters", command=lambda: open_letters_window(win, root),
                          width=350, height=60, radius=30,
                          bg="#2196F3", hover_bg="#1976D2", fg="white").pack(pady=20)
    create_colored_button(win, "Grammar", command=lambda: open_grammar_window(win, root),
                          width=350, height=60, radius=30,
                          bg="#FF5722", hover_bg="#E64A19", fg="white").pack(pady=20)
    create_colored_button(win, "Story", command=lambda: open_story_window(win, root),
                          width=350, height=60, radius=30,
                          bg="#9C27B0", hover_bg="#7B1FA2", fg="white").pack(pady=20)
    create_colored_button(win, "Rhyme", command=lambda: open_rhyme_window(win, root),
                          width=350, height=60, radius=30,
                          bg="#009688", hover_bg="#00796B", fg="white").pack(pady=20)

    # Back button to go back to language window
    create_colored_button(win, "Back", command=lambda: [win.destroy(), prev_win.deiconify()],
                          width=150, height=40, radius=20,
                          bg="#757575", hover_bg="#616161", fg="white").pack(pady=20)



# --------- Window 3: Letters ---------

def open_letters_window(prev_win, root, selected_lang_code='en'):
    prev_win.withdraw()

    letters_win = tk.Toplevel()
    letters_win.title("Learn Letters")
    letters_win.attributes('-fullscreen', True)
    letters_win.configure(bg="#FFFACD")

    control_frame = tk.Frame(letters_win, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    create_colored_button(control_frame, "тЬЦ", command=lambda: [stop_audio(), letters_win.destroy(), root.destroy()],
                          width=60, height=40, font=("Segoe UI", 14, "bold"),
                          bg="#f44336", fg="white", hover_bg="#d32f2f").pack(side="right", padx=5, pady=5)

    create_colored_button(control_frame, "тАФ", command=letters_win.iconify,
                          width=60, height=40, font=("Segoe UI", 14, "bold"),
                          bg="#2196F3", fg="white", hover_bg="#1976D2").pack(side="right", padx=5, pady=5)

    lang = translations.get(selected_lang_code, translations['en'])

    current_index = {'val': 0}
    letters = [chr(i) for i in range(65, 91)]

    example_words = {
        'A': "A for Apple", 'B': "B for Ball", 'C': "C for Cat", 'D': "D for Dog",
        'E': "E for Elephant", 'F': "F for Fish", 'G': "G for Goat", 'H': "H for Hat",
        'I': "I for Ice", 'J': "J for Jug", 'K': "K for Kite", 'L': "L for Lion",
        'M': "M for Monkey", 'N': "N for Nest", 'O': "O for Owl", 'P': "P for Pig",
        'Q': "Q for Queen", 'R': "R for Rat", 'S': "S for Sun", 'T': "T for Tiger",
        'U': "U for Umbrella", 'V': "V for Van", 'W': "W for Wolf", 'X': "X for X-ray",
        'Y': "Y for Yak", 'Z': "Z for Zebra"
    }

    content_frame = tk.Frame(letters_win, bg="#FFFACD")
    content_frame.pack(expand=True)

    image_label = tk.Label(content_frame, bg="#FFFACD")
    image_label.pack(pady=10)

    letter_label = tk.Label(content_frame, text="", font=("Arial", 60, "bold"), bg="#FFFACD")
    letter_label.pack()

    example_label = tk.Label(content_frame, text="", font=("Arial", 24), bg="#FFFACD")
    example_label.pack(pady=10)

    def show_letter():
        stop_audio()
        letter = letters[current_index['val']]
        example = example_words.get(letter, "")
        letter_label.config(text=f"{letter} / {letter.lower()}")
        example_label.config(text=f"Example: {example}")
        play_text_audio(example)

        image_path = resource_path(f"Images/{letter.lower()}.jpg")
        try:
            img = Image.open(image_path).resize((500, 500))
            photo = ImageTk.PhotoImage(img)
            image_label.config(image=photo, text="")
            image_label.image = photo
        except Exception:
            image_label.config(image="", text="(Image not found)", font=("Arial", 14))

    def next_letter():
        if current_index['val'] < 25:
            current_index['val'] += 1
            show_letter()

    def prev_letter():
        if current_index['val'] > 0:
            current_index['val'] -= 1
            show_letter()

    btn_frame = tk.Frame(letters_win, bg="#FFFACD")
    btn_frame.pack(pady=20)

    # Navigation buttons
    nav_row = tk.Frame(btn_frame, bg="#FFFACD")
    nav_row.pack(pady=10)

    create_colored_button(nav_row, lang["prev"], prev_letter,
                          width=200, height=60, font=("Segoe UI", 18, "bold"),
                          bg="#607D8B", fg="white", hover_bg="#455A64").pack(side="left", padx=40)

    create_colored_button(nav_row, lang["next"], next_letter,
                          width=200, height=60, font=("Segoe UI", 18, "bold"),
                          bg="#607D8B", fg="white", hover_bg="#455A64").pack(side="right", padx=40)

    # Speak button
    speak_text = translations.get(selected_lang_code, translations['en'])['speak']
    create_colored_button(btn_frame, speak_text,
                          lambda: play_text_audio(example_words[letters[current_index['val']]]),
                          width=200, height=60, font=("Segoe UI", 18, "bold"),
                          bg="#2196F3", fg="white", hover_bg="#1976D2").pack(pady=10)

    # Back button
    create_colored_button(btn_frame, lang["back"],
                          lambda: [stop_audio(), letters_win.destroy(), prev_win.deiconify()],
                          width=200, height=60, font=("Segoe UI", 18, "bold"),
                          bg="#f44336", fg="white", hover_bg="#d32f2f").pack(pady=10)

    show_letter()



# --------- Window 4: Grammar ---------
basic_grammar_texts = {
    'en': """1. Nouns: Names of people, places, or things.
2. Pronouns: Words that replace nouns.
3. Verbs: Action or state of being words.
4. Adjectives: Describe nouns.
5. Adverbs: Describe verbs, adjectives, or other adverbs.
6. Prepositions: Show relationships between words.
7. Conjunctions: Connect words or groups of words.
8. Interjections: Express strong feelings or emotions.""",

    'ml': """1. Nouns: р┤Жр┤│р╡Бр┤Хр╡╛, р┤╕р╡Нр┤ер┤▓р┤Щр╡Нр┤Щр╡╛, р┤╡р┤╕р╡Нр┤др╡Бр┤Хр╡Нр┤Хр┤│р╡Бр┤Яр╡Ж р┤кр╡Зр┤░р╡Н.
2. Pronouns: р┤ир┤╛р┤ор┤В р┤ор┤╛р┤▒р╡Нр┤▒р╡Бр┤ир╡Нр┤и р┤╡р┤╛р┤Хр╡Нр┤Хр╡Бр┤Хр╡╛.
3. Verbs: р┤кр╡Нр┤░р┤╡р╡╝р┤др╡Нр┤др┤┐ р┤Ер┤▓р╡Нр┤▓р╡Жр┤Щр╡Нр┤Хр┤┐р╡╜ р┤Ер┤╡р┤╕р╡Нр┤е р┤╡р┤╛р┤Хр╡Нр┤Хр╡Бр┤Хр╡╛.
4. Adjectives: р┤ир┤╛р┤ор┤Щр╡Нр┤Щр┤│р╡Ж р┤╡р┤┐р┤╡р┤░р┤гр┤В р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤ир╡Нр┤ир╡Б.
5. Adverbs: р┤Хр╡Нр┤░р┤┐р┤п, р┤╡р┤┐р┤╢р╡Зр┤╖р┤гр┤В, р┤Ер┤▓р╡Нр┤▓р╡Жр┤Щр╡Нр┤Хр┤┐р╡╜ р┤ор┤▒р╡Нр┤▒р╡Н р┤Хр╡Нр┤░р┤┐р┤пр┤╛р┤╡р┤┐р┤╢р╡Зр┤╖р┤гр┤Щр╡Нр┤Щр┤│р╡Ж р┤╡р┤┐р┤╡р┤░р┤гр┤В р┤Ър╡Жр┤пр╡Нр┤пр╡Бр┤ир╡Нр┤ир╡Б.
6. Prepositions: р┤╡р┤╛р┤Хр╡Нр┤Хр╡Бр┤Хр╡╛ р┤др┤ор╡Нр┤ор┤┐р┤▓р╡Бр┤│р╡Нр┤│ р┤мр┤ир╡Нр┤зр┤В р┤Хр┤╛р┤гр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б.
7. Conjunctions: р┤╡р┤╛р┤Хр╡Нр┤Хр╡Бр┤Хр╡╛ р┤Ер┤▓р╡Нр┤▓р╡Жр┤Щр╡Нр┤Хр┤┐р╡╜ р┤╡р┤╛р┤Хр╡Нр┤Хр╡Бр┤Хр┤│р╡Бр┤Яр╡Ж р┤Хр╡Вр┤Яр╡Нр┤Яр┤Щр╡Нр┤Щр┤│р╡Ж р┤мр┤ир╡Нр┤зр┤┐р┤кр╡Нр┤кр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б.
8. Interjections: р┤╢р┤Хр╡Нр┤др┤ор┤╛р┤п р┤╡р┤┐р┤Хр┤╛р┤░р┤Щр╡Нр┤Щр╡╛ р┤кр╡Нр┤░р┤Хр┤Яр┤┐р┤кр╡Нр┤кр┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир╡Б.""",

    'hi': """1. Nouns: рд╡реНрдпрдХреНрддрд┐, рд╕реНрдерд╛рди, рдпрд╛ рд╡рд╕реНрддреБ рдХреЗ рдирд╛рдоред
2. Pronouns: рд╕рдВрдЬреНрдЮрд╛ рдХреЗ рд╕реНрдерд╛рди рдкрд░ рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╢рдмреНрджред
3. Verbs: рдХрд╛рд░реНрдп рдпрд╛ рд╕реНрдерд┐рддрд┐ рджрд░реНрд╢рд╛рдиреЗ рд╡рд╛рд▓реЗ рд╢рдмреНрджред
4. Adjectives: рд╕рдВрдЬреНрдЮрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╢рдмреНрджред
5. Adverbs: рдХреНрд░рд┐рдпрд╛, рд╡рд┐рд╢реЗрд╖рдг рдпрд╛ рдЕрдиреНрдп рдХреНрд░рд┐рдпрд╛ рд╡рд┐рд╢реЗрд╖рдг рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╢рдмреНрджред
6. Prepositions: рд╢рдмреНрджреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдмрдВрдз рджрд░реНрд╢рд╛рддреЗ рд╣реИрдВред
7. Conjunctions: рд╢рдмреНрджреЛрдВ рдпрд╛ рд╢рдмреНрдж рд╕рдореВрд╣реЛрдВ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред
8. Interjections: рддреАрд╡реНрд░ рднрд╛рд╡ рдпрд╛ рднрд╛рд╡рдирд╛ рд╡реНрдпрдХреНрдд рдХрд░рддреЗ рд╣реИрдВред""",

    'ta': """1. Nouns: рооройро┐родро░рпНроХро│рпН, роЗроЯроЩрпНроХро│рпН роЕро▓рпНро▓родрпБ рокрпКро░рпБроЯрпНроХро│ро┐ройрпН рокрпЖропро░рпНроХро│рпН.
2. Pronouns: рокрпЖропро░рпНроЪрпНроЪрпКро▓рпНро▓рпИ рооро╛ро▒рпНро▒рпБроорпН роЪрпКро▒рпНроХро│рпН.
3. Verbs: роЪрпЖропро▓рпН роЕро▓рпНро▓родрпБ роиро┐ро▓рпИропрпИ роХрпВро▒рпБроорпН роЪрпКро▒рпНроХро│рпН.
4. Adjectives: рокрпЖропро░рпНроЪрпНроЪрпКро▒рпНроХро│рпИ ро╡ро┐ро│роХрпНроХрпБроорпН роЪрпКро▒рпНроХро│рпН.
5. Adverbs: ро╡ро┐ройрпИроЪрпНроЪрпКро▓рпН, рокрогрпНрокрпКро░рпБро│рпН роЕро▓рпНро▓родрпБ рокро┐ро▒ ро╡ро┐ройрпИропроЯрпИроЪрпНроЪрпКро▒рпНроХро│рпИ ро╡ро┐ро│роХрпНроХрпБроорпН роЪрпКро▒рпНроХро│рпН.
6. Prepositions: роЪрпКро▒рпНроХро│рпБроХрпНроХро┐роЯрпИропро┐ро▓ро╛рой роЙро▒ро╡рпИ роХро╛роЯрпНроЯрпБроорпН роЪрпКро▒рпНроХро│рпН.
7. Conjunctions: роЪрпКро▒рпНроХро│рпН роЕро▓рпНро▓родрпБ роЪрпКро▒рпНро▒рпКроЯро░рпНроХро│рпИ роЗрогрпИроХрпНроХрпБроорпН роЪрпКро▒рпНроХро│рпН.
8. Interjections: родрпАро╡ро┐ро░рооро╛рой роЙрогро░рпНро╡рпБроХро│рпИ ро╡рпЖро│ро┐рокрпНрокроЯрпБродрпНродрпБроорпН роЪрпКро▒рпНроХро│рпН.""",

    'te': """1. Nouns: р░╡р▒Нр░пр░Хр▒Нр░др▒Бр░▓р▒Б, р░╕р▒Нр░ер░╛р░ир░╛р░▓р▒Б р░▓р▒Зр░жр░╛ р░╡р░╕р▒Нр░др▒Бр░╡р▒Бр░▓ р░кр▒Зр░░р▒Нр░▓р▒Б.
2. Pronouns: р░ир░╛р░ор░╡р░╛р░Ър░Хр░В р░╕р▒Нр░ер░╛р░ир░Вр░▓р▒Л р░╡р░Ър▒Нр░Ър▒З р░кр░жр░╛р░▓р▒Б.
3. Verbs: р░Хр░╛р░░р▒Нр░пр░╛р░ир▒Нр░ир░┐ р░▓р▒Зр░жр░╛ р░╕р▒Нр░ер░┐р░др░┐р░ир░┐ р░др▒Жр░▓р░┐р░пр░Ьр▒Зр░╕р▒З р░кр░жр░╛р░▓р▒Б.
4. Adjectives: р░ир░╛р░ор░╡р░╛р░Ър░Хр░╛р░▓р░ир▒Б р░╡р░┐р░╡р░░р░┐р░Вр░Ър▒З р░кр░жр░╛р░▓р▒Б.
5. Adverbs: р░Хр▒Нр░░р░┐р░п, р░╡р░┐р░╢р▒Зр░╖р░гр░В р░▓р▒Зр░жр░╛ р░Зр░др░░ р░Хр▒Нр░░р░┐р░пр░╛р░╡р░┐р░╢р▒Зр░╖р░гр░╛р░▓р░ир▒Б р░╡р░┐р░╡р░░р░┐р░Вр░Ър▒З р░кр░жр░╛р░▓р▒Б.
6. Prepositions: р░кр░жр░╛р░▓ р░ор░зр▒Нр░п р░╕р░Вр░мр░Вр░зр░╛р░ир▒Нр░ир░┐ р░Ър▒Вр░кр▒Бр░др▒Бр░Вр░жр░┐.
7. Conjunctions: р░кр░жр░╛р░▓р▒Б р░▓р▒Зр░жр░╛ р░кр░жр░мр░Вр░зр░╛р░▓р░ир▒Б р░Хр░▓р▒Бр░кр▒Бр░др░╛р░пр░┐.
8. Interjections: р░др▒Ар░╡р▒Нр░░ р░нр░╛р░╡р░╛р░▓р░ир▒Б р░╡р▒Нр░пр░Хр▒Нр░др░кр░░р▒Бр░╕р▒Нр░др░╛р░пр░┐.""",

    'kn': """1. Nouns: р▓Ьр▓ир▓░р│Б, р▓╕р│Нр▓ер▓│р▓Чр▓│р│Б р▓Ер▓ер▓╡р▓╛ р▓╡р▓╕р│Нр▓др│Бр▓Чр▓│ р▓╣р│Жр▓╕р▓░р│Бр▓Чр▓│р│Б.
2. Pronouns: р▓ир▓╛р▓ор▓кр▓жр▓ж р▓мр▓жр▓▓р▓╛р▓Чр▓┐ р▓мр▓░р│Бр▓╡ р▓кр▓жр▓Чр▓│р│Б.
3. Verbs: р▓Хр│Нр▓░р▓┐р▓пр│Жр▓пр▓ир│Нр▓ир│Б р▓Ер▓ер▓╡р▓╛ р▓╕р│Нр▓ер▓┐р▓др▓┐р▓пр▓ир│Нр▓ир│Б р▓╕р│Вр▓Ър▓┐р▓╕р│Бр▓╡ р▓кр▓жр▓Чр▓│р│Б.
4. Adjectives: р▓ир▓╛р▓ор▓кр▓жр▓Чр▓│р▓ир│Нр▓ир│Б р▓╡р▓░р│Нр▓гр▓┐р▓╕р│Бр▓╡ р▓кр▓жр▓Чр▓│р│Б.
5. Adverbs: р▓Хр│Нр▓░р▓┐р▓пр▓╛р▓кр▓ж, р▓╡р▓┐р▓╢р│Зр▓╖р▓г р▓Ер▓ер▓╡р▓╛ р▓Зр▓др▓░р│Ж р▓Хр│Нр▓░р▓┐р▓пр▓╛р▓╡р▓┐р▓╢р│Зр▓╖р▓гр▓Чр▓│р▓ир│Нр▓ир│Б р▓╡р▓░р│Нр▓гр▓┐р▓╕р│Бр▓╡ р▓кр▓жр▓Чр▓│р│Б.
6. Prepositions: р▓кр▓жр▓Чр▓│ р▓ир▓бр│Бр▓╡р▓┐р▓и р▓╕р▓Вр▓мр▓Вр▓зр▓╡р▓ир│Нр▓ир│Б р▓др│Лр▓░р▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж.
7. Conjunctions: р▓кр▓жр▓Чр▓│р│Б р▓Ер▓ер▓╡р▓╛ р▓кр▓жр▓Чр│Бр▓Ър│Нр▓Ыр▓Чр▓│р▓ир│Нр▓ир│Б р▓╕р▓Вр▓кр▓░р│Нр▓Хр▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж.
8. Interjections: р▓мр▓▓р▓╡р▓╛р▓ж р▓нр▓╛р▓╡р▓ир│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓╡р│Нр▓пр▓Хр│Нр▓др▓кр▓бр▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж."""
}

def open_basic_grammar_study(parent_win, root, lang_code='en'):
    parent_win.withdraw()
    win = tk.Toplevel()
    win.title(translations1[lang_code]["basic_grammar"])
    win.attributes('-fullscreen', True)
    win.configure(bg="#FFF8E1")

    # Title
    tk.Label(win, text=translations1[lang_code]["basic_grammar"],
             font=("Arial", 28, "bold"), bg="#FFF8E1").pack(pady=(20, 10))

    grammar_text = basic_grammar_texts.get(lang_code, basic_grammar_texts['en'])

    # --- Container frame to center white box ---
    center_container = tk.Frame(win, bg="#FFF8E1")
    center_container.pack(expand=True, fill="both")

    # --- White frame centered in the screen ---
    white_frame = tk.Frame(center_container, bg="white", bd=2, relief="groove", width=1100, height=700)
    white_frame.place(relx=0.5, rely=0.5, anchor="center")

    # Make sure frame does not shrink
    white_frame.pack_propagate(False)

    # Text widget inside white frame
    text_widget = tk.Text(white_frame, wrap="word", font=("Arial", 28, "bold"),
                          bg="white", bd=0)
    text_widget.insert("1.0", grammar_text)
    text_widget.config(state="disabled")
    text_widget.pack(expand=True, fill="both", padx=20, pady=20)

    # --- Buttons Frame ---
    btn_frame = tk.Frame(win, bg="#FFF8E1")
    btn_frame.pack(side="bottom", pady=30)

    listen_btn = create_colored_button(btn_frame, translations1[lang_code]["listen"],
                                       lambda: play_text_audio(grammar_text),
                                       width=250, height=60, font=("Segoe UI", 18, "bold"),
                                       bg="#2196F3", hover_bg="#1976D2")
    listen_btn.pack(side="left", padx=20)

    back_btn = create_colored_button(btn_frame, translations1[lang_code]["back"],
                                     lambda: [stop_audio(), win.destroy(), parent_win.deiconify()],
                                     width=250, height=60, font=("Segoe UI", 18, "bold"),
                                     bg="#f44336", hover_bg="#d32f2f")
    back_btn.pack(side="left", padx=20)





def open_grammar_analyzer(parent_win, root, lang_code='en'):
    parent_win.withdraw()
    win = tk.Toplevel()
    win.title(translations1[lang_code]["grammar_analyzer"])
    win.attributes('-fullscreen', True)
    win.configure(bg="#FFF8E1")

    tk.Label(win, text="ЁЯУЭ " + translations1[lang_code]["grammar_analyzer"],
             font=("Arial", 24, "bold"), bg="#FFF8E1").pack(pady=30)

    tk.Label(win, text=translations1[lang_code]["enter_sentence"],
             font=("Arial", 16), bg="#FFF8E1").pack(pady=10)

    input_box = tk.Text(win, height=3, width=60, font=("Arial", 14))
    input_box.pack(pady=10)

    result_label = tk.Label(win, text="", font=("Arial", 16),
                            justify="left", bg="#FFF8E1", anchor="w")
    result_label.pack(pady=15)

    def analyze():
        sentence = input_box.get("1.0", tk.END).strip()
        if not sentence:
            messagebox.showwarning("тЪа", translations1[lang_code]["enter_sentence"])
            return
        tokens = word_tokenize(sentence)
        tagged = pos_tag(tokens)

        nouns = [w for w, pos in tagged if pos.startswith("NN")]
        pronouns = [w for w, pos in tagged if pos.startswith("PRP")]
        verbs = [w for w, pos in tagged if pos.startswith("VB")]

        result_text = (
            f"Nouns: {', '.join(nouns) or 'None'}\n"
            f"Pronouns: {', '.join(pronouns) or 'None'}\n"
            f"Verbs: {', '.join(verbs) or 'None'}"
        )
        result_label.config(text=result_text)
        play_text_audio(result_text)

    create_colored_button(win, translations1[lang_code]["analyze"], analyze,
                          width=500, height=60, font=("Segoe UI", 18, "bold"),
                          bg="#009688", hover_bg="#00796B").pack(pady=10)

    create_colored_button(win, translations1[lang_code]["back"],
                          lambda: [stop_audio(), win.destroy(), parent_win.deiconify()],
                          width=300, height=60, font=("Segoe UI", 18, "bold"),
                          bg="#f44336", hover_bg="#d32f2f").pack(pady=30)

def open_grammar_window(prev_win, root, lang_code='en'):
    prev_win.withdraw()
    main_grammar_win = tk.Toplevel()
    main_grammar_win.title("Grammar")
    main_grammar_win.attributes('-fullscreen', True)
    main_grammar_win.configure(bg="#FFF8E1")

    control_frame = tk.Frame(main_grammar_win, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    create_colored_button(control_frame, "тЬЦ",
                          command=lambda: [stop_audio(), main_grammar_win.destroy(), root.destroy()],
                          width=60, height=40,
                          bg="#f44336", fg="white", hover_bg="#d32f2f").pack(side="right", padx=5, pady=5)

    create_colored_button(control_frame, "тАФ",
                          command=main_grammar_win.iconify,
                          width=60, height=40,
                          bg="#2196F3", fg="white", hover_bg="#1976D2").pack(side="right", padx=5, pady=5)

    tk.Label(main_grammar_win, text=translations1[lang_code]["grammar_options"],
             font=("Arial", 24, "bold"), bg="#FFF8E1").pack(pady=30)

    create_colored_button(main_grammar_win, "ЁЯУЪ " + translations1[lang_code]["basic_grammar"],
                          lambda: open_basic_grammar_study(main_grammar_win, root, lang_code),
                          width=900, height=80, font=("Segoe UI", 26, "bold"),
                          bg="#3F51B5", hover_bg="#303F9F").pack(pady=20)

    create_colored_button(main_grammar_win, "ЁЯУЭ " + translations1[lang_code]["grammar_analyzer"],
                          lambda: open_grammar_analyzer(main_grammar_win, root, lang_code),
                          width=600, height=80, font=("Segoe UI", 26, "bold"),
                          bg="#009688", hover_bg="#00796B").pack(pady=20)

    create_colored_button(main_grammar_win, "тмЕ " + translations1[lang_code]["back"],
                          lambda: [main_grammar_win.destroy(), prev_win.deiconify()],
                          width=250, height=60, font=("Segoe UI", 18, "bold"),
                          bg="#f44336", hover_bg="#d32f2f").pack(pady=40)



#------------Story window-------------
def open_story_window(prev_win, root, lang_code="en"):
    prev_win.withdraw()
    story_win = tk.Toplevel()
    story_win.title("Moral Stories")
    story_win.attributes('-fullscreen', True)
    story_win.configure(bg="#FFFACD")

    # Top control panel
    top_frame = tk.Frame(story_win, bg="#FFFACD")
    top_frame.pack(fill='x', side='top', anchor='ne')

    create_colored_button(top_frame, "тЬЦ", lambda: [stop_audio(), story_win.destroy(), root.quit()],
                          width=60, height=40,
                          bg="#f44336", fg="white", hover_bg="#d32f2f").pack(side="right", padx=5, pady=5)
    create_colored_button(top_frame, "тАФ", lambda: story_win.iconify(),
                          width=60, height=40,
                          bg="#2196F3", fg="white", hover_bg="#1976D2").pack(side="right", padx=5, pady=5)

    # Title label
    tk.Label(story_win, text=translation2[lang_code]["title"], font=("Arial", 26, "bold"), bg="#FFFACD", fg="#333").pack(pady=20)

    # Sample stories dictionary (title: content)
    stories ={
        "The Lion and the Mouse": (
            "One day, a mighty lion was sleeping peacefully in the forest. "
            "Suddenly, a tiny mouse ran across his paw, waking him up. "
            "The lion caught the mouse and was about to eat it. "
            "The little mouse begged for mercy, promising to help the lion someday. "
            "The lion laughed but let the mouse go.\n\n"
            "A few days later, the lion got trapped in a hunterтАЩs net. "
            "He roared loudly, but no one came to help. "
            "The little mouse heard the roar, came quickly, and gnawed through the ropes to free the lion. "
            "The lion was grateful and realized even the smallest friends can be the greatest helpers.\n\n"
            "Moral: Small acts of kindness can be powerful."
        ),

        "The Thirsty Crow": (
            "On a hot summer day, a thirsty crow flew all over looking for water. "
            "After a long search, it found a pitcher with a little water at the bottom, but the water was too low to reach. "
            "The clever crow picked up small stones and dropped them one by one into the pitcher. "
            "The water level rose, and soon the crow was able to drink.\n\n"
            "The crowтАЩs patience and clever thinking saved it from thirst.\n\n"
            "Moral: Where there is a will, there is a way."
        ),

        "The Honest Woodcutter": (
            "A poor woodcutter was chopping wood by the river when his axe slipped and fell into the water. "
            "He was very sad as he had no money to buy a new one.\n\n"
            "Suddenly, a fairy appeared and offered to help. "
            "She brought up a golden axe and asked if it was his. "
            "The woodcutter honestly said no. "
            "She then showed a silver axe, but he said no again.\n\n"
            "Finally, she showed his old axe, and he happily took it. "
            "The fairy was so impressed with his honesty that she gave him all three axes.\n\n"
            "Moral: Honesty is the best policy."
        ),

        "The Fox and the Grapes": (
            "A hungry fox saw a bunch of ripe grapes hanging high on a vine. "
            "He jumped and jumped but couldnтАЩt reach them. "
            "After many tries, tired and disappointed, he walked away saying, 'Those grapes are sour anyway.'\n\n"
            "This story teaches how sometimes people pretend to dislike what they cannot have.\n\n"
            "Moral: ItтАЩs easy to hate what you canтАЩt have."
        ),

        "The Tortoise and the Hare": (
            "The hare was very proud of how fast he could run. "
            "One day, he challenged the slow tortoise to a race. "
            "The race began, and the hare sped ahead, confident he would win easily.\n\n"
            "Feeling sure of victory, the hare took a nap mid-race. "
            "Meanwhile, the tortoise kept moving slowly but steadily. "
            "When the hare woke up, he saw the tortoise crossing the finish line first.\n\n"
            "Moral: Slow and steady wins the race."
        ),

        "The Greedy Dog": (
            "A dog found a big bone and happily carried it home. "
            "On the way, he crossed a river and saw his own reflection in the water with the bone. "
            "Thinking it was another dog with a bigger bone, he barked and dropped his own bone into the water.\n\n"
            "He ended up with no bone at all.\n\n"
            "Moral: Greed leads to loss."
        ),

        "The Ant and the Grasshopper": (
            "All summer long, the hardworking ant gathered food and stored it for winter. "
            "The carefree grasshopper spent the summer singing and playing.\n\n"
            "When winter came, the grasshopper had no food and was hungry and cold. "
            "He asked the ant for help, but the ant reminded him to prepare for hard times.\n\n"
            "Moral: Work today for a better tomorrow."
        )
    }
    # --- Story Listbox ---
    story_listbox = tk.Listbox(
        story_win, font=("Arial", 18, "bold"), height=10, width=50,
        bg="#FFFFFF", fg="#000000", selectbackground="#FFD54F"
    )
    for title in stories:
        story_listbox.insert(tk.END, title)
    story_listbox.pack(pady=10, padx=50, fill='x')

    def open_story_detail():
        selected = story_listbox.curselection()
        if not selected:
            messagebox.showwarning("Warning", translation2[lang_code]["warning"])
            return
        title = story_listbox.get(selected[0])
        content = stories[title]

        story_detail_win = tk.Toplevel(story_win)
        story_detail_win.title(title)
        story_detail_win.attributes('-fullscreen', True)
        story_detail_win.configure(bg="#FFFACD")

        text_frame = tk.Frame(story_detail_win, bg="#FFFACD", bd=2, relief="groove")
        text_frame.place(relx=0.5, rely=0.5, anchor="center", relwidth=0.8, relheight=0.7)

        text_widget = tk.Text(
            text_frame,
            wrap="word",
            font=("bold", 30),
            bg="#FFFACD",
            padx=20,
            pady=20
        )
        text_widget.insert("1.0", content)
        text_widget.config(state="disabled")
        text_widget.pack(expand=True, fill="both")

        button_frame = tk.Frame(story_detail_win, bg="#FFFACD")
        button_frame.pack(side="bottom", pady=30)

        create_colored_button(button_frame, translation2[lang_code]["listen"], lambda: play_text_audio(content),
                              width=300, height=60, radius=30, bg="#2196F3", hover_bg="#1976D2").pack(pady=10)

        create_colored_button(button_frame, translation2[lang_code]["back"], lambda: [stop_audio(), story_detail_win.destroy()],
                              width=300, height=60, radius=30, bg="#f44336", hover_bg="#d32f2f").pack(pady=20)

    button_frame = tk.Frame(story_win, bg="#FFFACD")
    button_frame.pack(pady=30)

    create_colored_button(button_frame, translation2[lang_code]["open_story"], open_story_detail,
                          width=300, height=60, radius=30,
                          bg="#9C27B0", hover_bg="#7B1FA2", fg="white").pack(pady=20)

    create_colored_button(button_frame, translation2[lang_code]["back"],
                          lambda: [stop_audio(), story_win.destroy(), prev_win.deiconify()],
                          width=300, height=60, radius=30,
                          bg="#f44336", hover_bg="#d32f2f", fg="white").pack(pady=20)


def open_rhyme_window(prev_win, root, lang_code="en"):
    stop_audio()
    prev_win.withdraw()

    rhyme_win = tk.Toplevel()
    rhyme_win.title("Rhymes")
    rhyme_win.attributes("-fullscreen", True)
    rhyme_win.configure(bg="#E3F2FD")

    t = translation3[lang_code]  # Get translation

    # Title
    tk.Label(
        rhyme_win, text=t["title"], font=("Arial", 32, "bold"),
        bg="#E3F2FD", fg="#0D47A1"
    ).pack(pady=20)

    # Scrollable Rhyme List
    list_frame = tk.Frame(rhyme_win, bg="#E3F2FD")
    list_frame.pack(pady=10)

    scrollbar = tk.Scrollbar(list_frame)
    rhyme_listbox = tk.Listbox(
        list_frame, font=("Arial", 18, "bold"), height=8, width=40,
        yscrollcommand=scrollbar.set, bg="#FFFFFF", fg="#000000", selectbackground="#90CAF9"
    )
    scrollbar.config(command=rhyme_listbox.yview)
    scrollbar.pack(side=tk.RIGHT, fill=tk.Y)
    rhyme_listbox.pack(side=tk.LEFT, fill=tk.BOTH, expand=True)

    # Lyrics Display Area inside a frame (optional visual separation)
    display_frame = tk.Frame(rhyme_win, bg="#E3F2FD")
    display_frame.pack(pady=20, padx=40, fill="both", expand=False)

    rhyme_text_display = tk.Text(
        display_frame, font=("Arial", 22, "bold"), wrap="word", height=10, width=70,
        bg="#FFFFFF", fg="#1A237E", padx=10, pady=10, borderwidth=2, relief="groove"
    )
    rhyme_text_display.pack(fill="both", expand=True)

    rhymes = {
        "Twinkle Twinkle Little Star": (
            "Twinkle, twinkle, little star,\n"
            "How I wonder what you are!\n"
            "Up above the world so high,\n"
            "Like a diamond in the sky.\n\n"
            "Twinkle, twinkle, little star,\n"
            "How I wonder what you are!"
            ,"rhymes/twinkle.mp3"
        ),
        "Baa Baa Black Sheep": (
            "Baa baa black sheep, have you any wool?\n"
            "Yes sir, yes sir, three bags full;\n"
            "One for the master, one for the dame,\n"
            "And one for the little boy who lives down the lane."
            ,"rhymes/baa.mp3"
        ),
        "Jack and Jill": (
            "Jack and Jill went up the hill\n"
            "To fetch a pail of water.\n"
            "Jack fell down and broke his crown,\n"
            "And Jill came tumbling after."
             ,"rhymes/jack.mp3"
        ),
        "Humpty Dumpty": (
            "Humpty Dumpty sat on a wall,\n"
            "Humpty Dumpty had a great fall.\n"
            "All the king's horses and all the king's men\n"
            "Couldn't put Humpty together again."
             ,"rhymes/humpty.mp3"
        ),
        "London Bridge Is Falling Down": (
            "London Bridge is falling down,\n"
            "Falling down, falling down,\n"
            "London Bridge is falling down,\n"
            "My fair lady.\n\n"
            
            "Build it up with wood and clay,\n"
            "Wood and clay, wood and clay,\n"
            "Build it up with wood and clay,\n"
            "My fair lady.\n\n"

            "Wood and clay will wash away,\n"
            "Wash away, wash away,\n"
            "Wood and clay will wash away,\n"
            "My fair lady.\n\n"

            "Build it up with bricks and stone,\n"
            "Bricks and stone, bricks and stone,\n"
            "Build it up with bricks and stone,\n"
            "My fair lady.\n\n"

            "Bricks and stone will not stay,\n"
            "Not stay, not stay,\n"
            "Bricks and stone will not stay,\n"
            "My fair lady."
            ,"rhymes/london.mp3"
        ),
        "The Alphabet Song":(
            "A-B-C-D-E-F-G\n"
            "H-I-J-K-LMNOP\n"
            "Q-R-S T-U-V\n"
            "W X Y and Zee\n"
            "Now I know my тАЬABCsтАЭ\n"
            "Next time wonтАЩt you sing with me?\n"
            "Now we know our тАЬABCsтАЭ\n"
            "next time we can sing with glee."
            ,"rhymes/alphabet.mp3"
        ),
        "Row Row Row Your Boat": (
            "Row, row, row your boat\n"
            "Gently down the stream.\n"
            "Merrily, merrily, merrily, merrily,\n"
            "Life is but a dream."
            ,"rhymes/row.mp3"
        )
    }

    for title in rhymes:
        rhyme_listbox.insert(tk.END, title)

    # Play selected rhyme
    def play_selected_rhyme():
        selected = rhyme_listbox.curselection()
        if not selected:
            messagebox.showwarning(t["warning"], t["select_warning"])
            return
        title = rhyme_listbox.get(selected[0])
        lyrics, mp3_path1 = rhymes[title]
        mp3_path = resource_path(mp3_path1)

        rhyme_text_display.delete("1.0", tk.END)
        rhyme_text_display.insert(tk.END, lyrics)
        play_mp3(mp3_path)

    # --- Bottom Button Frame ---
    btn_frame = tk.Frame(rhyme_win, bg="#E3F2FD")
    btn_frame.pack(side="bottom", pady=30)

    create_colored_button(
        btn_frame, t["play"], play_selected_rhyme,
        width=250, height=60, radius=30, bg="#4CAF50", hover_bg="#388E3C",
        font=("Arial", 18, "bold")
    ).pack(side="left", padx=20)

    create_colored_button(
        btn_frame, t["stop"], stop_audio,
        width=250, height=60, radius=30, bg="#FF9800", hover_bg="#EF6C00",
        font=("Arial", 18, "bold")
    ).pack(side="left", padx=20)

    create_colored_button(
        btn_frame, t["back"], lambda: [stop_audio(), rhyme_win.destroy(), prev_win.deiconify()],
        width=250, height=60, radius=30, bg="#f44336", hover_bg="#d32f2f",
        font=("Arial", 18, "bold")
    ).pack(side="left", padx=20)



def open_category_window_malayalam(prev_win, root):
    prev_win.withdraw()
    win = tk.Toplevel()
    win.title("р┤кр┤ар┤и р┤ор╡Жр┤ир╡Б")
    win.attributes('-fullscreen', True)
    win.configure(bg="#FFFACD")

    control_frame = tk.Frame(win, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    create_colored_button(control_frame, "тЬЦ", command=win.destroy,
                          width=60, height=40, radius=12,
                          bg="#B71C1C", hover_bg="#D32F2F", fg="white").pack(side="right", padx=5, pady=5)
    create_colored_button(control_frame, "тАФ", command=win.iconify,
                          width=60, height=40, radius=12,
                          bg="#1565C0", hover_bg="#1976D2", fg="white").pack(side="right", padx=5, pady=5)

    tk.Label(win, text="р┤ир┤┐р┤Щр╡Нр┤Щр╡╛ р┤кр┤ар┤┐р┤Хр╡Нр┤Хр┤╛р╡╗ р┤Жр┤Чр╡Нр┤░р┤╣р┤┐р┤Хр╡Нр┤Хр╡Бр┤ир╡Нр┤ир┤др╡Б р┤Ор┤ир╡Нр┤др╡Н?", font=("Segoe UI", 28, "bold"),
             bg="#FFFACD", fg="#263238").pack(pady=60)

    create_colored_button(win, "р┤Ер┤Хр╡Нр┤╖р┤░р┤Щр╡Нр┤Щр╡╛", command=lambda: open_letters_window(win, root, selected_lang_code='ml'),
                          width=350, height=60, radius=30,
                          bg="#2196F3", hover_bg="#1976D2", fg="white").pack(pady=20)
    create_colored_button(win, "р┤╡р╡Нр┤пр┤╛р┤Хр┤░р┤гр┤В", command=lambda: open_grammar_window(win, root, lang_code='ml'),
                          width=350, height=60, radius=30,
                          bg="#FF5722", hover_bg="#E64A19", fg="white").pack(pady=20)
    create_colored_button(win, "р┤Хр┤е", command=lambda: open_story_window(win, root, lang_code="ml"),
                          width=350, height=60, radius=30,
                          bg="#9C27B0", hover_bg="#7B1FA2", fg="white").pack(pady=20)
    create_colored_button(win, "р┤кр┤╛р┤Яр╡Нр┤Яр╡Н", command=lambda: open_rhyme_window(win, root, lang_code="ml"),
                          width=350, height=60, radius=30,
                          bg="#009688", hover_bg="#00796B", fg="white").pack(pady=20)

    create_colored_button(win, "р┤кр┤┐р┤ир╡Нр┤ир╡Зр┤пр╡Нр┤Хр╡Нр┤Хр╡Н", command=lambda: [win.destroy(), prev_win.deiconify()],
                          width=150, height=40, radius=20,
                          bg="#757575", hover_bg="#616161", fg="white").pack(pady=20)

def open_category_window_hindi(prev_win, root):
    prev_win.withdraw()
    win = tk.Toplevel()
    win.title("рдЕрдзреНрдпрдпрди рдореЗрдиреВ")
    win.attributes('-fullscreen', True)
    win.configure(bg="#FFFACD")

    control_frame = tk.Frame(win, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    create_colored_button(control_frame, "тЬЦ", command=win.destroy, width=60, height=40,
                          radius=12, bg="#B71C1C", hover_bg="#D32F2F", fg="white").pack(side="right", padx=5, pady=5)
    create_colored_button(control_frame, "тАФ", command=win.iconify, width=60, height=40,
                          radius=12, bg="#1565C0", hover_bg="#1976D2", fg="white").pack(side="right", padx=5, pady=5)

    tk.Label(win, text="рдЖрдк рдХреНрдпрд╛ рдкрдврд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?", font=("Segoe UI", 28, "bold"),
             bg="#FFFACD", fg="#263238").pack(pady=60)

    create_colored_button(win, "рдЕрдХреНрд╖рд░", command=lambda: open_letters_window(win, root, selected_lang_code='hi'),
                          width=350, height=60, radius=30, bg="#2196F3", hover_bg="#1976D2", fg="white").pack(pady=20)
    create_colored_button(win, "рд╡реНрдпрд╛рдХрд░рдг", command=lambda: open_grammar_window(win, root, lang_code='hi'),
                          width=350, height=60, radius=30, bg="#FF5722", hover_bg="#E64A19", fg="white").pack(pady=20)
    create_colored_button(win, "рдХрд╣рд╛рдиреА", command=lambda: open_story_window(win, root, lang_code="hi"),
                          width=350, height=60, radius=30, bg="#9C27B0", hover_bg="#7B1FA2", fg="white").pack(pady=20)
    create_colored_button(win, "рдХрд╡рд┐рддрд╛", command=lambda: open_rhyme_window(win, root, lang_code="hi"),
                          width=350, height=60, radius=30, bg="#009688", hover_bg="#00796B", fg="white").pack(pady=20)

    create_colored_button(win, "рд╡рд╛рдкрд╕", command=lambda: [win.destroy(), prev_win.deiconify()],
                          width=150, height=40, radius=20, bg="#757575", hover_bg="#616161", fg="white").pack(pady=20)

def open_category_window_tamil(prev_win, root):
    prev_win.withdraw()

    win = tk.Toplevel()
    win.title("рокроЯро┐рокрпНрокрпБ рокроЯрпНроЯро┐")
    win.attributes('-fullscreen', True)
    win.configure(bg="#FFFACD")

    control_frame = tk.Frame(win, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    create_colored_button(control_frame, "тЬЦ", command=root.destroy,
                          width=60, height=40, radius=12,
                          bg="#B71C1C", hover_bg="#D32F2F", fg="white").pack(side="right", padx=5, pady=5)
    create_colored_button(control_frame, "тАФ", command=win.iconify,
                          width=60, height=40, radius=12,
                          bg="#1565C0", hover_bg="#1976D2", fg="white").pack(side="right", padx=5, pady=5)

    tk.Label(win, text="роирпАроЩрпНроХро│рпН роОройрпНрой рокроЯро┐роХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│рпН?", font=("Segoe UI", 28, "bold"),
             bg="#FFFACD", fg="#263238").pack(pady=60)

    create_colored_button(win, "роОро┤рпБродрпНродрпБроХрпНроХро│рпН", command=lambda: open_letters_window(win, root, selected_lang_code='ta'),
                          width=350, height=60, radius=30,
                          bg="#2196F3", hover_bg="#1976D2", fg="white").pack(pady=20)
    create_colored_button(win, "ро╡ро┐ро▓роХрпНроХроЩрпНроХро│рпН", command=lambda: open_grammar_window(win, root, lang_code='ta'),
                          width=350, height=60, radius=30,
                          bg="#FF5722", hover_bg="#E64A19", fg="white").pack(pady=20)
    create_colored_button(win, "роХродрпИ", command=lambda: open_story_window(win, root, lang_code="ta"),
                          width=350, height=60, radius=30,
                          bg="#9C27B0", hover_bg="#7B1FA2", fg="white").pack(pady=20)
    create_colored_button(win, "рокро╛роЯро▓рпН", command=lambda: open_rhyme_window(win, root, lang_code="ta"),
                          width=350, height=60, radius=30,
                          bg="#009688", hover_bg="#00796B", fg="white").pack(pady=20)

    create_colored_button(win, "рокро┐ройрпНро╡ро╛", command=lambda: [win.destroy(), prev_win.deiconify()],
                          width=150, height=40, radius=20,
                          bg="#757575", hover_bg="#616161", fg="white").pack(pady=20)

def open_category_window_telugu(prev_win, root):
    prev_win.withdraw()

    win = tk.Toplevel()
    win.title("р░Ер░зр▒Нр░пр░пр░и р░ор▒Жр░ир▒В")
    win.attributes('-fullscreen', True)
    win.configure(bg="#FFFACD")

    control_frame = tk.Frame(win, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    create_colored_button(control_frame, "тЬЦ", command=root.destroy,
                          width=60, height=40, radius=12,
                          bg="#B71C1C", hover_bg="#D32F2F", fg="white").pack(side="right", padx=5, pady=5)
    create_colored_button(control_frame, "тАФ", command=win.iconify,
                          width=60, height=40, radius=12,
                          bg="#1565C0", hover_bg="#1976D2", fg="white").pack(side="right", padx=5, pady=5)

    tk.Label(win, text="р░ор▒Ар░░р▒Б р░Пр░ор░┐ р░Ър░жр░╡р░╛р░▓р░ир▒Бр░Хр▒Бр░Вр░Яр▒Бр░ир▒Нр░ир░╛р░░р▒Б?", font=("Segoe UI", 28, "bold"),
             bg="#FFFACD", fg="#263238").pack(pady=60)

    create_colored_button(win, "р░Ер░Хр▒Нр░╖р░░р░╛р░▓р▒Б", command=lambda: open_letters_window(win, root, selected_lang_code='te'),
                          width=350, height=60, radius=30,
                          bg="#2196F3", hover_bg="#1976D2", fg="white").pack(pady=20)
    create_colored_button(win, "р░╡р▒Нр░пр░╛р░Хр░░р░гр░В", command=lambda: open_grammar_window(win, root, lang_code='te'),
                          width=350, height=60, radius=30,
                          bg="#FF5722", hover_bg="#E64A19", fg="white").pack(pady=20)
    create_colored_button(win, "р░Хр░е", command=lambda: open_story_window(win, root, lang_code="te"),
                          width=350, height=60, radius=30,
                          bg="#9C27B0", hover_bg="#7B1FA2", fg="white").pack(pady=20)
    create_colored_button(win, "р░кр░╛р░Я", command=lambda: open_rhyme_window(win, root, lang_code="te"),
                          width=350, height=60, radius=30,
                          bg="#009688", hover_bg="#00796B", fg="white").pack(pady=20)

    create_colored_button(win, "р░╡р▒Жр░ир░Хр▒Нр░Хр░┐", command=lambda: [win.destroy(), prev_win.deiconify()],
                          width=150, height=40, radius=20,
                          bg="#757575", hover_bg="#616161", fg="white").pack(pady=20)

def open_category_window_kannada(prev_win, root):
    prev_win.withdraw()

    win = tk.Toplevel()
    win.title("р▓Ер▓зр│Нр▓пр▓пр▓и р▓ор│Жр▓ир│Б")
    win.attributes('-fullscreen', True)
    win.configure(bg="#FFFACD")

    control_frame = tk.Frame(win, bg="#FFFACD")
    control_frame.pack(fill='x', anchor='ne')

    create_colored_button(control_frame, "тЬЦ", command=root.destroy,
                          width=60, height=40, radius=12,
                          bg="#B71C1C", hover_bg="#D32F2F", fg="white").pack(side="right", padx=5, pady=5)
    create_colored_button(control_frame, "тАФ", command=win.iconify,
                          width=60, height=40, radius=12,
                          bg="#1565C0", hover_bg="#1976D2", fg="white").pack(side="right", padx=5, pady=5)

    tk.Label(win, text="р▓ир│Ар▓╡р│Б р▓Пр▓ир│Б р▓Ер▓зр│Нр▓пр▓пр▓и р▓ор▓╛р▓бр▓▓р│Б р▓Зр▓Ър│Нр▓Ыр▓┐р▓╕р│Бр▓др│Нр▓др│Ар▓░р▓┐?", font=("Segoe UI", 28, "bold"),
             bg="#FFFACD", fg="#263238").pack(pady=60)

    create_colored_button(win, "р▓Ер▓Хр│Нр▓╖р▓░р▓Чр▓│р│Б", command=lambda: open_letters_window(win, root, selected_lang_code='kn'),
                          width=350, height=60, radius=30,
                          bg="#2196F3", hover_bg="#1976D2", fg="white").pack(pady=20)
    create_colored_button(win, "р▓╡р│Нр▓пр▓╛р▓Хр▓░р▓г", command=lambda: open_grammar_window(win, root, lang_code='kn'),
                          width=350, height=60, radius=30,
                          bg="#FF5722", hover_bg="#E64A19", fg="white").pack(pady=20)
    create_colored_button(win, "р▓Хр▓ер│Ж", command=lambda: open_story_window(win, root, lang_code="kn"),
                          width=350, height=60, radius=30,
                          bg="#9C27B0", hover_bg="#7B1FA2", fg="white").pack(pady=20)
    create_colored_button(win, "р▓кр▓жр│Нр▓п", command=lambda: open_rhyme_window(win, root, lang_code="kn"),
                          width=350, height=60, radius=30,
                          bg="#009688", hover_bg="#00796B", fg="white").pack(pady=20)

    create_colored_button(win, "р▓╣р▓┐р▓Вр▓жр│Ж", command=lambda: [win.destroy(), prev_win.deiconify()],
                          width=150, height=40, radius=20,
                          bg="#757575", hover_bg="#616161", fg="white").pack(pady=20)

if __name__ == "__main__":
    show_intro_window()
